\documentclass{ximera}

\input{../preamble.tex}

\outcome{Recognize a composition of functions.}
\outcome{Take derivatives of compositions of functions using the chain rule.}
\outcome{Take derivatives that require the use of multiple derivative rules.}
\outcome{Use the chain rule to calculate derivatives from a table of values.}
\outcome{Understand rate of change when quantities are dependent upon each other.}
\outcome{Use order of operations in situations requiring multiple derivative rules.}
\outcome{Apply chain rule to relate quantities expressed with different units.}

\title[Dig-In:]{The chain rule}

\begin{document}
\begin{abstract}
  Here we compute derivatives of compositions of functions
\end{abstract}
\maketitle


So far we have seen how to compute the derivative of a function built
up from other functions by addition, subtraction, multiplication and
division. There is another very important way that we combine
functions: composition. The \textit{chain rule} allows us to deal with
this case. Consider
\[
h(x) = \left(3x^2+1\right)^{18}.
\] 
While there are several different ways to differentiate this function,
if we let $f(x) = x^{18}$ and $g(x) = 3x^2+1$, then we can express
$h(x) = f(g(x))$. The question is, can we compute the derivative of a
composition of functions using the derivatives of the constituents
$f(x)$ and $g(x)$? To do so, we need the \textit{chain rule}.



\begin{theorem}[Chain Rule]\index{chain rule}\index{derivative rules!chain}
If $f$ and $g$ are differentiable, then
\[
\ddx f(g(x)) = f'(g(x))g'(x).
\]
\end{theorem}



It will take a bit of practice to make the use of the chain rule come
naturally, it is more complicated than the earlier differentiation
rules we have seen. Let's return to our motivating example.

\begin{example}
Compute:
\[
\ddx \left(3x^2+1\right)^{18}
\]

\begin{explanation}
Set $f(x) = x^{18}$ and $g(x) = 3x^2+1$, now
\[
f'(x) = \answer[given]{18x^{17}} \qquad\text{and}\qquad g'(x) = \answer[given]{6x}.
\]
Hence
\begin{align*}
\ddx \left(3x^2+1\right)^{18} &= \ddx f(g(x))\\ 
&=f'(g(x))g'(x) \\
&= 18\left(\answer[given]{3x^2+1}\right)^{17}\cdot \answer[given]{6x}.
\end{align*}
\end{explanation}
\end{example}


Let's see a more complicated chain of compositions.

\begin{example}
Compute:
\[
\ddx \sqrt{1+\sqrt{x}}
\]

\begin{explanation}
Set 
$f(x)=\sqrt{x}$ and $g(x)=1+x$. Hence,
\[
\sqrt{1+\sqrt{x}}=f(g(\answer[given]{f}(x)))
\]
and by the chain rule we know
\[
\ddx f(g(f(x))) = f'(g(f(x)))g'(f(x))f'(x).
\]
Since 
\[
f'(x) = \answer[given]{\frac{1}{2\sqrt{x}}} \qquad\text{and}\qquad g'(x) = \answer[given]{1}
\]
We have that
\[
\ddx \sqrt{1+\sqrt{x}} = \frac{1}{2\sqrt{1+\sqrt{x}}}\cdot 1\cdot  \answer[given]{\frac{1}{2\sqrt{x}}}.
\]
\end{explanation}
\end{example}

The chain rule allows to differentiate compositions of functions that
would otherwise be difficult to get our hands on.

\begin{example}
Compute:
\[
\ddx \sqrt[3]{\left(3x^6+4x^2-1\right)^{10} + 1 }
\]

\begin{explanation}
Set $f(x) = \sqrt[3]{x}$, $g(x) = \answer[given]{x^{10}+1}$,and $h(x) = \answer[given]{3x^6+4x^2-1}$
so that $f(g(h(x))) = \sqrt[3]{\left(3x^6+4x^2-1\right)^{10} + 1 }$. Now
\begin{align*}
  \ddx \sqrt[3]{\left(3x^6+4x^2-1\right)^{10} + 1 } &= \ddx f(g(h(x)))\\
  &= f'(g(h(x))) \cdot g'(h(x)) \cdot h'(x)\\
  &= \frac{1}{3}\left(\answer[given]{\left(3x^6+4x^2-1\right)^{10} + 1}\right)^{-2/3} \\ & \cdot 10 \left(\answer[given]{3x^6+4x^2-1}\right) \cdot \left(\answer[given]{18x^5+8x}\right).
\end{align*}
\end{explanation}
\end{example}




Using the chain rule, the power rule, and the product rule it is
possible to avoid using the quotient rule entirely.

\begin{example}
Compute:
\[
\ddx \frac{x^3}{x^2+1} 
\] 

\begin{explanation}
Rewriting this as 
\[
\ddx x^3(x^2+1)^{-1}, 
\]
set $f(x) = \answer[given]{x^{-1}}$ and $g(x) = \answer[given]{x^2+1}$ so that $f(g(x)) = (x^2 + 1)^{-1}$. Now
\[
x^3(x^2+1)^{-1} = x^3 f(g(x)),
\]
and by the product and chain rules
\[
\ddx x^3 f(g(x)) = \answer[given]{3x^2} \cdot f(g(x))+ \answer[given]{x^3} \cdot f'(g(x))g'(x).
\]
Since $f'(x) = \answer[given]{\frac{-1}{x^2}}$ and $g'(x) = \answer[given]{2x}$, write
\[
\ddx \frac{x^3}{x^2+1} = \frac{3x^2}{x^2+1}-\frac{2x^4}{(x^2+1)^2}.
\]
\end{explanation}
\end{example}

Now that we are getting comfortable with chain rule, try one other.
\begin{example}
	Suppose $f$ is a function whose values are given in the following table.
	\begin{center}
		\begin{tabular}{c c c}
			\hline \hline
			x & f(x) & f'(x) \\ 
			\hline
			1 & -3 & 4\\
			2 & 5 & -1\\
			3 & 2 & 0\\
			\hline
		\end{tabular}		
	\end{center}
	
	Find $\displaystyle \eval{ \ddx\left( (4x-3) f\left( x^2+1\right) \right)}_{x=1}$
	\begin{explanation}
	At it's outer most level, this is a product of $4x-3$ and $f\left(x^2+1\right)$, so we start with product rule.
		\begin{align*}
			\ddx\left( (4x-3) f\left( x^2+1\right) \right) &= (\answer[given]{4} ) \cdot f\left( x^2+1\right) \\ &+ (4x-3) \cdot \ddx \left( f\left( x^2+1\right) \right) \\
				&= 4 f(x^2+1) + (4x-3) f'( x^2+1 ) \cdot (\answer[given]{2x} )\\
				&= 4 f(x^2 + 1) + (4x-3) f'(x^2+1) \cdot 2x.
		\end{align*}
		Evaluating at $x=1$ gives:
		\begin{align*}
			\eval{ \ddx\left( (4x-3) f\left( x^2+1\right) \right)}_{x=1} &= 4 f(2) + (1) f'(2) \cdot 2\\
				&= 4 \cdot ( \answer[given]{5} ) + 2 \cdot (\answer[given]{-1})\\
				&= \answer[given]{18}.
		\end{align*}
	\end{explanation}
\end{example}



\end{document}
